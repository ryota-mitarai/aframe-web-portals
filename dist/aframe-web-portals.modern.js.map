{"version":3,"file":"aframe-web-portals.modern.js","sources":["../src/lib/aframe-websurfaces.umd.js","../src/lib/aframe-aabb-collider-component.min.js","../src/webportal.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t((e||self).aframeWebsurfaces={})}(this,function(e){function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function n(t){var n;return(n=e.call(this)||this).element=t||document.createElement(\"div\"),n.element.style.position=\"absolute\",n.element.style.pointerEvents=\"auto\",n.addEventListener(\"removed\",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})}),n}return t(n,e),n.prototype.copy=function(t,n){return e.prototype.copy.call(this,t,n),this.element=t.element.cloneNode(!0),this},n}(THREE.Object3D);i.prototype.isCSS3DObject=!0,function(e){function n(t){var n;return(n=e.call(this,t)||this).rotation2D=0,n}return t(n,e),n.prototype.copy=function(t,n){return e.prototype.copy.call(this,t,n),this.rotation2D=t.rotation2D,this},n}(i).prototype.isCSS3DSprite=!0;var s=new THREE.Matrix4,o=new THREE.Matrix4,a=function(){var e,t,n,i,a=this,r={camera:{fov:0,style:\"\"},objects:new WeakMap},c=document.createElement(\"div\");c.style.overflow=\"hidden\",this.domElement=c;var l=document.createElement(\"div\");function d(e){return Math.abs(e)<1e-10?0:e}function m(e){var t=e.elements;return\"matrix3d(\"+d(t[0])+\",\"+d(-t[1])+\",\"+d(t[2])+\",\"+d(t[3])+\",\"+d(t[4])+\",\"+d(-t[5])+\",\"+d(t[6])+\",\"+d(t[7])+\",\"+d(t[8])+\",\"+d(-t[9])+\",\"+d(t[10])+\",\"+d(t[11])+\",\"+d(t[12])+\",\"+d(-t[13])+\",\"+d(t[14])+\",\"+d(t[15])+\")\"}function h(e){var t=e.elements;return\"translate(-50%,-50%)matrix3d(\"+d(t[0])+\",\"+d(t[1])+\",\"+d(t[2])+\",\"+d(t[3])+\",\"+d(-t[4])+\",\"+d(-t[5])+\",\"+d(-t[6])+\",\"+d(-t[7])+\",\"+d(t[8])+\",\"+d(t[9])+\",\"+d(t[10])+\",\"+d(t[11])+\",\"+d(t[12])+\",\"+d(t[13])+\",\"+d(t[14])+\",\"+d(t[15])+\")\"}function u(e,t,n,i){if(e.isCSS3DObject){var c;e.onBeforeRender(a,t,n),e.isCSS3DSprite?(s.copy(n.matrixWorldInverse),s.transpose(),0!==e.rotation2D&&s.multiply(o.makeRotationZ(e.rotation2D)),s.copyPosition(e.matrixWorld),s.scale(e.scale),s.elements[3]=0,s.elements[7]=0,s.elements[11]=0,s.elements[15]=1,c=h(s)):c=h(e.matrixWorld);var d=e.element,m=r.objects.get(e);void 0!==m&&m.style===c||(d.style.transform=c,r.objects.set(e,{style:c})),d.style.display=e.visible?\"\":\"none\",d.parentNode!==l&&l.appendChild(d),e.onAfterRender(a,t,n)}for(var p=0,f=e.children.length;p<f;p++)u(e.children[p],t,n)}l.style.transformStyle=\"preserve-3d\",l.style.pointerEvents=\"none\",c.appendChild(l),this.getSize=function(){return{width:e,height:t}},this.render=function(e,t){var s,o,a=t.projectionMatrix.elements[5]*i;r.camera.fov!==a&&(c.style.perspective=t.isPerspectiveCamera?a+\"px\":\"\",r.camera.fov=a),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.isOrthographicCamera&&(s=-(t.right+t.left)/2,o=(t.top+t.bottom)/2);var h=(t.isOrthographicCamera?\"scale(\"+a+\")translate(\"+d(s)+\"px,\"+d(o)+\"px)\"+m(t.matrixWorldInverse):\"translateZ(\"+a+\"px)\"+m(t.matrixWorldInverse))+\"translate(\"+n+\"px,\"+i+\"px)\";r.camera.style!==h&&(l.style.transform=h,r.camera.style=h),u(e,e,t)},this.setSize=function(s,o){n=(e=s)/2,i=(t=o)/2,c.style.width=s+\"px\",c.style.height=o+\"px\",l.style.width=s+\"px\",l.style.height=o+\"px\"}},r=100,c=function(){function e(e,t){this.websurfaceEntity=t,this.enabled=!0,this.cssRenderer=new a,this.domElement=this.cssRenderer.domElement,this.domElement.style.position=\"fixed\",this.domElement.style.zIndex=\"-2\",this.cssCamera=new THREE.PerspectiveCamera(e.fov,e.aspect,e.near*r,e.far*r),this.camera=e,this.cssScene=new THREE.Scene,this.update=this.update.bind(this)}var t=e.prototype;return t.setSize=function(e,t){this.cssRenderer.setSize(e,t),this.cssCamera.aspect=e/t,this.cssCamera.updateProjectionMatrix()},t.update=function(){this.camera.getWorldPosition(this.cssCamera.position),this.cssCamera.position.multiplyScalar(r),this.camera.getWorldQuaternion(this.cssCamera.quaternion),this.cssRenderer.render(this.cssScene,this.cssCamera)},e}(),l=function(e){function n(t,n,s,o,a){var c,l=(void 0===a?{}:a).elementWidth,d=void 0===l?1280:l,m=new THREE.PlaneGeometry(s,o),h=new THREE.MeshBasicMaterial({opacity:0,blending:THREE.NoBlending,side:THREE.DoubleSide,color:new THREE.Color(0,0,0)});return(c=e.call(this,m,h)||this).context=t,c.domElement=n,c.aspectRatio=o/s,c.elementWidth=d,c.elementHeight=c.elementWidth*c.aspectRatio,c.width=s,c.height=o,c.resizeElement(),c.cssObject=new i(c.domElement),c.cssObject.scale.multiplyScalar(r/(c.elementWidth/c.width)),c.cssObjectInitialScale=c.cssObject.scale,c.size=new THREE.Vector3,c.box=new THREE.Box3,c.addEventListener(\"added\",c.handleAdded),c.addEventListener(\"removed\",c.handleRemoved),c.update=c.update.bind(function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(c)),c}t(n,e);var s=n.prototype;return s.handleAdded=function(){this.context.cssScene.add(this.cssObject)},s.handleRemoved=function(){this.context.cssScene.remove(this.cssObject)},s.resizeElement=function(){this.domElement.style.width=this.elementWidth+\"px\",this.domElement.style.height=this.elementHeight+\"px\"},s.setElement=function(e){this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=e,this.cssObject.element=e,this.resizeElement()},s.update=function(e){this.cssObject.quaternion.copy(e.quaternion),this.cssObject.position.copy(e.position).multiplyScalar(r),this.box.setFromObject(this).getSize(this.size);var t=e.scale;this.oldScaleFactor!=t&&(this.oldScaleFactor=t,this.cssObject.scale.set(this.cssObjectInitialScale.x,this.cssObjectInitialScale.y,this.cssObjectInitialScale.z),this.cssObject.scale.multiply(t)),this.cssObject.visible=e.visible},s.dispose=function(){this.removeEventListener(\"added\",this.handleAdded),this.removeEventListener(\"removed\",this.handleRemoved),this.domElement.remove(),this.geometry.dispose(),this.material.dispose()},n}(THREE.Mesh),d=AFRAME.registerComponent(\"websurface\",{schema:{url:{default:\"https://aframe.io\"},width:{default:1},height:{default:.75},isInteractable:{default:!0},frameSkips:{default:1},autoSceneStyling:{default:!0}},init:function(){var e=this.el,t=this.data;1==t.autoSceneStyling&&(e.sceneEl.style.position=\"absolute\",e.sceneEl.style.zIndex=\"1\"),1==t.isInteractable&&(t.mouseHasLeftScreen=!0,e.setAttribute(\"geometry\",\"primitive:plane; width:\"+t.width+\"; height:\"+t.height+\";\"),e.addEventListener(\"click\",function(){0!=t.mouseHasLeftScreen&&(document.exitPointerLock(),e.sceneEl.style.zIndex=\"-1\",t.mouseHasLeftScreen=!1)}),e.addEventListener(\"mouseenter\",function(){t.context.domElement.style.zIndex=\"0\"}),e.addEventListener(\"mouseleave\",function(){t.context.domElement.style.zIndex=\"-2\",t.mouseHasLeftScreen=!0})),e.addEventListener(\"cam-loaded\",function(){var n=document.createElement(\"iframe\");n.setAttribute(\"src\",t.url),n.style.border=\"none\";var i=new c(e.sceneEl.camera,e);i.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(i.domElement);var s=new l(i,n,t.width,t.height);if(e.object3D.add(s),1==t.isInteractable){var o=document.createElement(\"div\");o.style.position=\"fixed\",o.style.top=\"0\",o.style.width=\"100%\",o.style.height=\"100%\",o.style.zIndex=\"-1\",i.domElement.appendChild(o),o.addEventListener(\"click\",function(){e.sceneEl.style.zIndex=1})}this.websurface_iframe=n,this.css3d_context=i,t.context=i,t.element=s,window.addEventListener(\"resize\",function(){i.setSize(window.innerWidth,window.innerHeight)})}),t.frames=0,t.isCamLoaded=!1},tick:function(){var e=this.el,t=this.data;if(1!=t.isPaused)if(0!=t.isCamLoaded){var n=t.context,i=t.element;t.frames%t.frameSkips==0&&(n&&n.update(),i&&i.update(e.object3D)),t.frames++}else e.sceneEl.camera&&(this.el.emit(\"cam-loaded\"),t.isCamLoaded=!0)},pause:function(){this.data.isPaused=!0},play:function(){this.data.isPaused=!1}});e.component=d});\r\n//# sourceMappingURL=aframe-websurfaces.umd.js.map","!function(e){function t(i){if(s[i])return s[i].exports;var n=s[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var s={};return t.m=e,t.c=s,t.p=\"\",t(0)}([function(e,t){function s(e,t){var s;for(e.length=0,s=0;s<t.length;s++)e[s]=t[s]}if(\"undefined\"==typeof AFRAME)throw new Error(\"Component attempted to register before AFRAME was available.\");var i={childList:!0,attributes:!0,subtree:!0};AFRAME.registerComponent(\"aabb-collider\",{schema:{collideNonVisible:{default:!1},debug:{default:!1},enabled:{default:!0},interval:{default:80},objects:{default:\"\"}},init:function(){this.centerDifferenceVec3=new THREE.Vector3,this.clearedIntersectedEls=[],this.closestIntersectedEl=null,this.boundingBox=new THREE.Box3,this.boxCenter=new THREE.Vector3,this.boxHelper=new THREE.BoxHelper,this.boxMax=new THREE.Vector3,this.boxMin=new THREE.Vector3,this.hitClosestClearEventDetail={},this.hitClosestEventDetail={},this.intersectedEls=[],this.objectEls=[],this.newIntersectedEls=[],this.prevCheckTime=void 0,this.previousIntersectedEls=[],this.setDirty=this.setDirty.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.hitStartEventDetail={intersectedEls:this.newIntersectedEls}},play:function(){this.observer.observe(this.el.sceneEl,i),this.el.sceneEl.addEventListener(\"object3dset\",this.setDirty),this.el.sceneEl.addEventListener(\"object3dremove\",this.setDirty)},remove:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener(\"object3dset\",this.setDirty),this.el.sceneEl.removeEventListener(\"object3dremove\",this.setDirty)},tick:function(e){var t,i,n,r,o=this.boundingBox,l=this.centerDifferenceVec3,h=this.clearedIntersectedEls,c=this.intersectedEls,a=this.el,b=this.newIntersectedEls,d=this.objectEls,E=this.prevCheckTime,x=this.previousIntersectedEls;if(this.data.enabled&&!(E&&e-E<this.data.interval)){for(this.prevCheckTime=e,this.dirty&&this.refreshObjects(),o.setFromObject(a.object3D),this.boxMin.copy(o.min),this.boxMax.copy(o.max),o.getCenter(this.boxCenter),this.data.debug&&(this.boxHelper.setFromObject(a.object3D),this.boxHelper.parent||a.sceneEl.object3D.add(this.boxHelper)),s(x,c),c.length=0,r=0;r<d.length;r++)d[r]!==this.el&&(this.data.collideNonVisible||d[r].getAttribute(\"visible\")?this.isIntersecting(d[r])&&c.push(d[r]):this.data.debug&&(t=d[r].object3D.boxHelper,t&&(a.sceneEl.object3D.remove(t),d[r].object3D.boxHelper=null)));for(b.length=0,r=0;r<c.length;r++)x.indexOf(c[r])===-1&&b.push(c[r]);for(h.length=0,r=0;r<x.length;r++)c.indexOf(x[r])===-1&&(x[r].hasAttribute(\"aabb-collider\")||x[r].emit(\"hitend\"),h.push(x[r]));for(r=0;r<b.length;r++)b[r]!==this.el&&(b[r].hasAttribute(\"aabb-collider\")||b[r].emit(\"hitstart\"));for(r=0;r<c.length;r++)c[r]!==this.el&&(l.copy(c[r].object3D.boundingBoxCenter).sub(this.boxCenter),(void 0===i||l.length()<i)&&(i=l.length(),n=c[r]));!c.length&&this.closestIntersectedEl?(this.hitClosestClearEventDetail.el=this.closestIntersectedEl,this.closestIntersectedEl.emit(\"hitclosestclear\"),this.closestIntersectedEl=null,a.emit(\"hitclosestclear\",this.hitClosestClearEventDetail)):n!==this.closestIntersectedEl&&(this.closestIntersectedEl&&(this.hitClosestClearEventDetail.el=this.closestIntersectedEl,this.closestIntersectedEl.emit(\"hitclosestclear\",this.hitClosestClearEventDetail)),n&&(n.emit(\"hitclosest\"),this.closestIntersectedEl=n,this.hitClosestEventDetail.el=n,a.emit(\"hitclosest\",this.hitClosestEventDetail))),h.length&&a.emit(\"hitend\"),b.length&&a.emit(\"hitstart\",this.hitStartEventDetail)}},isIntersecting:function(){var e=new THREE.Box3;return function(t){var s,i;return e.setFromObject(t.object3D),this.data.debug&&(t.object3D.boxHelper||(t.object3D.boxHelper=new THREE.BoxHelper(t.object3D,new THREE.Color(Math.random(),Math.random(),Math.random())),t.sceneEl.object3D.add(t.object3D.boxHelper)),t.object3D.boxHelper.setFromObject(t.object3D)),s=e.min,i=e.max,t.object3D.boundingBoxCenter=t.object3D.boundingBoxCenter||new THREE.Vector3,e.getCenter(t.object3D.boundingBoxCenter),this.boxMin.x<=i.x&&this.boxMax.x>=s.x&&this.boxMin.y<=i.y&&this.boxMax.y>=s.y&&this.boxMin.z<=i.z&&this.boxMax.z>=s.z}}(),setDirty:function(){this.dirty=!0},refreshObjects:function(){var e=this.data;this.objectEls=e.objects?this.el.sceneEl.querySelectorAll(e.objects):this.el.sceneEl.children,this.dirty=!1}})}]);","import './lib/aframe-aabb-collider-component.min';\r\nimport './lib/aframe-websurfaces.umd';\r\n\r\nAFRAME.registerComponent('web-portal', {\r\n  schema: {\r\n    url: { default: 'https://aframe.io' },\r\n    text: { default: '' },\r\n    width: { default: 1.5 },\r\n    height: { default: 2.4 },\r\n    frameWidth: { default: 0.15 },\r\n    enableFrame: { default: true },\r\n    enableWebsurface: { default: true },\r\n    enableReturnButton: { default: true },\r\n  },\r\n\r\n  init: function () {\r\n    const el = this.el;\r\n    const data = this.data;\r\n    const scene = this.el.sceneEl;\r\n\r\n    el.object3D.position.y += data.height / 2;\r\n\r\n    var iframe;\r\n\r\n    if (data.enableWebsurface == true) {\r\n      el.setAttribute('websurface', {\r\n        url: data.url,\r\n        width: data.width,\r\n        height: data.height,\r\n        isInteractable: false,\r\n      });\r\n    } else {\r\n      el.setAttribute('geometry', { primitive: 'plane', width: data.width, height: data.height });\r\n      el.setAttribute('material', { color: '#faf' });\r\n\r\n      iframe = document.createElement('iframe');\r\n      iframe.src = data.url;\r\n      document.body.appendChild(iframe);\r\n\r\n      iframe.style.position = 'fixed';\r\n      iframe.style.top = '0';\r\n      iframe.style.left = '0';\r\n      iframe.style.width = '100%';\r\n      iframe.style.height = '100%';\r\n      iframe.style.overflow = 'none';\r\n\r\n      iframe.style.zIndex = 10;\r\n      iframe.style.display = 'none';\r\n    }\r\n\r\n    if (data.enableReturnButton == true) {\r\n      const button = document.createElement('button');\r\n      button.innerHTML = 'return';\r\n\r\n      const css = `\r\n      button {\r\n        position: fixed;\r\n        top: .5em;\r\n        left: .5em;\r\n\r\n        cursor: pointer;\r\n        color: white;\r\n        box-shadow: 1px 1px 1px 1px #000000;\r\n        background-color: transparent;\r\n        border-radius: 5px;\r\n        border: 2px solid white;\r\n        \r\n        font-family: Arial;\r\n        font-size: 1em;\r\n        font-weight: bold;\r\n        text-shadow: 2px 2px 1px #000000;\r\n        padding: 0.25em 0.5em;\r\n\r\n        z-index: 20;\r\n      }\r\n      \r\n      button:hover {\r\n        color: lightgrey;\r\n        border-color: lightgrey;\r\n      }`;\r\n\r\n      const style = document.createElement('style');\r\n      if (style.styleSheet) {\r\n        style.styleSheet.cssText = css;\r\n      } else {\r\n        style.appendChild(document.createTextNode(css));\r\n      }\r\n      button.appendChild(style);\r\n      document.body.appendChild(button);\r\n\r\n      button.style.display = 'none';\r\n\r\n      button.onclick = () => {\r\n        if (data.enableWebsurface == true) {\r\n          const context = el.css3d_context.domElement;\r\n\r\n          iframe.style = data.style_iframe;\r\n          context.style = data.style_context;\r\n          context.children[0].style.cssText = data.style_contextChild;\r\n\r\n          el.components['websurface'].play();\r\n        }\r\n\r\n        const camera = scene.camera.el;\r\n\r\n        const portalPos = new THREE.Vector3();\r\n        el.object3D.getWorldPosition(portalPos);\r\n        portalPos.y = camera.object3D.position.y;\r\n\r\n        const portalDir = new THREE.Vector3();\r\n        el.object3D.getWorldDirection(portalDir).multiplyScalar(1.5);\r\n\r\n        const modifiedPos = new THREE.Vector3();\r\n        modifiedPos.copy(portalPos);\r\n        modifiedPos.add(portalDir);\r\n\r\n        camera.object3D.position.x = modifiedPos.x;\r\n        camera.object3D.position.z = modifiedPos.z;\r\n\r\n        if (camera.components['look-controls']) {\r\n          camera.setAttribute('look-controls', { enabled: false });\r\n\r\n          const camPos = new THREE.Vector3();\r\n          camera.object3D.getWorldPosition(camPos);\r\n\r\n          const lookVector = new THREE.Vector3();\r\n          lookVector.subVectors(camPos, portalPos).add(camPos);\r\n\r\n          camera.object3D.lookAt(lookVector);\r\n          camera.object3D.updateMatrix();\r\n\r\n          const rotation = camera.getAttribute('rotation');\r\n          camera.components['look-controls'].pitchObject.rotation.x = THREE.Math.degToRad(rotation.x);\r\n          camera.components['look-controls'].yawObject.rotation.y = THREE.Math.degToRad(rotation.y);\r\n\r\n          camera.setAttribute('look-controls', { enabled: true });\r\n        }\r\n\r\n        scene.style.display = 'block';\r\n        button.style.display = 'none';\r\n      };\r\n\r\n      data.returnButton = button;\r\n    }\r\n\r\n    el.sceneEl.addEventListener('loaded', () => {\r\n      const cameraEl = scene.camera.el;\r\n      if (cameraEl.id) {\r\n        el.setAttribute('aabb-collider', { objects: `#${cameraEl.id}` });\r\n      } else {\r\n        cameraEl.id = 'web-portal-cam-tag';\r\n        el.setAttribute('aabb-collider', { objects: `#${cameraEl.id}` });\r\n      }\r\n    });\r\n\r\n    const title = document.createElement('a-text');\r\n    title.setAttribute('value', data.text);\r\n    title.setAttribute('position', `0 ${data.height * 0.5 + 0.25 + data.frameWidth} 0`);\r\n    title.setAttribute('align', 'center');\r\n    title.setAttribute('side', 'double');\r\n    el.appendChild(title);\r\n    data.titleEl = title;\r\n\r\n    if (data.enableFrame == true) {\r\n      const frameWidth = data.frameWidth;\r\n      const width = data.width;\r\n      const height = data.height;\r\n\r\n      const box1 = document.createElement('a-box');\r\n      box1.setAttribute('position', `${(width + frameWidth) / 2} 0 0`);\r\n      box1.setAttribute('scale', `${frameWidth} ${height} ${frameWidth}`);\r\n      el.appendChild(box1);\r\n\r\n      const box2 = document.createElement('a-box');\r\n      box2.setAttribute('position', `${-(width + frameWidth) / 2} 0 0`);\r\n      box2.setAttribute('scale', `${frameWidth} ${height} ${frameWidth}`);\r\n      el.appendChild(box2);\r\n\r\n      const box3 = document.createElement('a-box');\r\n      box3.setAttribute('position', `0 ${(height + frameWidth) / 2} 0`);\r\n      box3.setAttribute('scale', `${width + frameWidth * 2} ${frameWidth} ${frameWidth}`);\r\n      el.appendChild(box3);\r\n\r\n      const box4 = document.createElement('a-box');\r\n      box4.setAttribute('position', `0 0 ${-frameWidth / 4 - 0.01}`);\r\n      box4.setAttribute('scale', `${width + frameWidth * 2} ${height + frameWidth * 2} ${frameWidth / 2}`);\r\n      el.appendChild(box4);\r\n    }\r\n\r\n    el.addEventListener('hitstart', function () {\r\n      if (data.enableWebsurface == true) {\r\n        el.components['websurface'].pause();\r\n\r\n        iframe = el.websurface_iframe;\r\n        const context = el.css3d_context.domElement;\r\n\r\n        data.style_iframe = iframe.style.cssText;\r\n        data.style_context = context.style.cssText;\r\n        data.style_contextChild = context.children[0].style.cssText;\r\n\r\n        iframe.style = '';\r\n        context.style = '';\r\n        context.children[0].style = '';\r\n\r\n        iframe.style.position = 'fixed';\r\n        iframe.style.top = '0';\r\n        iframe.style.left = '0';\r\n        iframe.style.width = '100%';\r\n        iframe.style.height = '100%';\r\n        iframe.style.overflow = 'none';\r\n      }\r\n\r\n      scene.style.display = 'none';\r\n      iframe.style.display = 'block';\r\n      if (data.returnButton) data.returnButton.style.display = 'block';\r\n\r\n      document.exitPointerLock();\r\n    });\r\n  },\r\n\r\n  update: function () {\r\n    const data = this.data;\r\n\r\n    data.titleEl.setAttribute('value', data.text);\r\n  },\r\n});\r\n"],"names":["t","e","i","s","exports","n","id","loaded","call","m","c","p","AFRAME","Error","childList","attributes","subtree","registerComponent","schema","collideNonVisible","default","debug","enabled","interval","objects","init","this","centerDifferenceVec3","THREE","Vector3","clearedIntersectedEls","closestIntersectedEl","boundingBox","Box3","boxCenter","boxHelper","BoxHelper","boxMax","boxMin","hitClosestClearEventDetail","hitClosestEventDetail","intersectedEls","objectEls","newIntersectedEls","prevCheckTime","previousIntersectedEls","setDirty","bind","observer","MutationObserver","dirty","hitStartEventDetail","play","observe","el","sceneEl","addEventListener","remove","disconnect","removeEventListener","tick","r","o","l","h","a","b","d","E","x","data","refreshObjects","setFromObject","object3D","copy","min","max","getCenter","parent","add","length","getAttribute","isIntersecting","push","indexOf","hasAttribute","emit","boundingBoxCenter","sub","Color","Math","random","y","z","querySelectorAll","children","prototype","Object","create","constructor","setPrototypeOf","__proto__","element","document","createElement","style","position","pointerEvents","traverse","Element","parentNode","removeChild","cloneNode","Object3D","isCSS3DObject","rotation2D","isCSS3DSprite","Matrix4","camera","fov","WeakMap","overflow","domElement","abs","elements","u","onBeforeRender","matrixWorldInverse","transpose","multiply","makeRotationZ","copyPosition","matrixWorld","scale","get","transform","set","display","visible","appendChild","onAfterRender","f","transformStyle","getSize","width","height","render","projectionMatrix","perspective","isPerspectiveCamera","autoUpdate","updateMatrixWorld","isOrthographicCamera","right","left","top","bottom","setSize","websurfaceEntity","cssRenderer","zIndex","cssCamera","PerspectiveCamera","aspect","near","far","cssScene","Scene","update","updateProjectionMatrix","getWorldPosition","multiplyScalar","getWorldQuaternion","quaternion","elementWidth","PlaneGeometry","MeshBasicMaterial","opacity","blending","NoBlending","side","DoubleSide","color","context","aspectRatio","elementHeight","resizeElement","cssObject","cssObjectInitialScale","size","box","handleAdded","handleRemoved","ReferenceError","setElement","oldScaleFactor","dispose","geometry","material","Mesh","url","isInteractable","frameSkips","autoSceneStyling","mouseHasLeftScreen","setAttribute","exitPointerLock","border","window","innerWidth","innerHeight","body","websurface_iframe","css3d_context","frames","isCamLoaded","isPaused","pause","component","module","define","amd","self","aframeWebsurfaces","text","frameWidth","enableFrame","enableWebsurface","enableReturnButton","scene","iframe","primitive","src","button","innerHTML","css","styleSheet","cssText","createTextNode","onclick","style_iframe","style_context","style_contextChild","components","portalPos","portalDir","getWorldDirection","modifiedPos","camPos","lookVector","subVectors","lookAt","updateMatrix","rotation","pitchObject","degToRad","yawObject","returnButton","cameraEl","title","titleEl","box1","box2","box3","box4"],"mappings":"AAAC,IAAWA,GCAX,SAASC,GAAG,SAASD,EAAEE,GAAG,GAAGC,EAAED,GAAG,OAAOC,EAAED,GAAGE,QAAQ,IAAIC,EAAEF,EAAED,GAAG,CAACE,QAAQ,GAAGE,GAAGJ,EAAEK,QAAO,GAAI,OAAON,EAAEC,GAAGM,KAAKH,EAAED,QAAQC,EAAEA,EAAED,QAAQJ,GAAGK,EAAEE,QAAO,EAAGF,EAAED,YAAYD,EAAE,GAAUH,EAAES,EAAER,EAAED,EAAEU,EAAEP,EAAEH,EAAEW,EAAE,GAAGX,EAAE,GAAlM,CAAsM,CAAC,SAASC,EAAED,MAAwE,oBAAoBY,OAAO,UAAUC,MAAM,gEAAgE,IAAIX,EAAE,CAACY,WAAU,EAAGC,YAAW,EAAGC,SAAQ,GAAIJ,OAAOK,kBAAkB,gBAAgB,CAACC,OAAO,CAACC,kBAAkB,CAACC,SAAQ,GAAIC,MAAM,CAACD,SAAQ,GAAIE,QAAQ,CAACF,SAAQ,GAAIG,SAAS,CAACH,QAAQ,IAAII,QAAQ,CAACJ,QAAQ,KAAKK,KAAK,WAAWC,KAAKC,qBAAqB,IAAIC,MAAMC,QAAQH,KAAKI,sBAAsB,GAAGJ,KAAKK,qBAAqB,KAAKL,KAAKM,YAAY,IAAIJ,MAAMK,KAAKP,KAAKQ,UAAU,IAAIN,MAAMC,QAAQH,KAAKS,UAAU,IAAIP,MAAMQ,UAAUV,KAAKW,OAAO,IAAIT,MAAMC,QAAQH,KAAKY,OAAO,IAAIV,MAAMC,QAAQH,KAAKa,2BAA2B,GAAGb,KAAKc,sBAAsB,GAAGd,KAAKe,eAAe,GAAGf,KAAKgB,UAAU,GAAGhB,KAAKiB,kBAAkB,GAAGjB,KAAKkB,mBAAc,EAAOlB,KAAKmB,uBAAuB,GAAGnB,KAAKoB,SAASpB,KAAKoB,SAASC,KAAKrB,MAAMA,KAAKsB,SAAS,IAAIC,iBAAiBvB,KAAKoB,UAAUpB,KAAKwB,OAAM,EAAGxB,KAAKyB,oBAAoB,CAACV,eAAef,KAAKiB,oBAAoBS,KAAK,WAAW1B,KAAKsB,SAASK,QAAQ3B,KAAK4B,GAAGC,QAAQrD,GAAGwB,KAAK4B,GAAGC,QAAQC,iBAAiB,cAAc9B,KAAKoB,UAAUpB,KAAK4B,GAAGC,QAAQC,iBAAiB,iBAAiB9B,KAAKoB,WAAWW,OAAO,WAAW/B,KAAKsB,SAASU,aAAahC,KAAK4B,GAAGC,QAAQI,oBAAoB,cAAcjC,KAAKoB,UAAUpB,KAAK4B,GAAGC,QAAQI,oBAAoB,iBAAiBjC,KAAKoB,WAAWc,KAAK,SAAS3D,GAAG,IAAID,EAAEE,EAAEG,EAAEwD,EAAEC,EAAEpC,KAAKM,YAAY+B,EAAErC,KAAKC,qBAAqBqC,EAAEtC,KAAKI,sBAAsBpB,EAAEgB,KAAKe,eAAewB,EAAEvC,KAAK4B,GAAGY,EAAExC,KAAKiB,kBAAkBwB,EAAEzC,KAAKgB,UAAU0B,EAAE1C,KAAKkB,cAAcyB,EAAE3C,KAAKmB,uBAAuB,GAAGnB,KAAK4C,KAAKhD,WAAW8C,GAAGnE,EAAEmE,EAAE1C,KAAK4C,KAAK/C,UAAU,CAAC,IAAIG,KAAKkB,cAAc3C,EAAEyB,KAAKwB,OAAOxB,KAAK6C,iBAAiBT,EAAEU,cAAcP,EAAEQ,UAAU/C,KAAKY,OAAOoC,KAAKZ,EAAEa,KAAKjD,KAAKW,OAAOqC,KAAKZ,EAAEc,KAAKd,EAAEe,UAAUnD,KAAKQ,WAAWR,KAAK4C,KAAKjD,QAAQK,KAAKS,UAAUqC,cAAcP,EAAEQ,UAAU/C,KAAKS,UAAU2C,QAAQb,EAAEV,QAAQkB,SAASM,IAAIrD,KAAKS,YAAz5D,SAAWlC,EAAED,GAAG,IAAIG,EAAE,IAAIF,EAAE+E,OAAO,EAAE7E,EAAE,EAAEA,EAAEH,EAAEgF,OAAO7E,IAAIF,EAAEE,GAAGH,EAAEG,GAAs2DA,CAAEkE,EAAE3D,GAAGA,EAAEsE,OAAO,EAAEnB,EAAE,EAAEA,EAAEM,EAAEa,OAAOnB,IAAIM,EAAEN,KAAKnC,KAAK4B,KAAK5B,KAAK4C,KAAKnD,mBAAmBgD,EAAEN,GAAGoB,aAAa,WAAWvD,KAAKwD,eAAef,EAAEN,KAAKnD,EAAEyE,KAAKhB,EAAEN,IAAInC,KAAK4C,KAAKjD,QAAQrB,EAAEmE,EAAEN,GAAGY,SAAStC,aAAc8B,EAAEV,QAAQkB,SAAShB,OAAOzD,GAAGmE,EAAEN,GAAGY,SAAStC,UAAU,OAAQ,IAAI+B,EAAEc,OAAO,EAAEnB,EAAE,EAAEA,EAAEnD,EAAEsE,OAAOnB,KAAuB,IAAnBQ,EAAEe,QAAQ1E,EAAEmD,KAAUK,EAAEiB,KAAKzE,EAAEmD,IAAI,IAAIG,EAAEgB,OAAO,EAAEnB,EAAE,EAAEA,EAAEQ,EAAEW,OAAOnB,KAAuB,IAAnBnD,EAAE0E,QAAQf,EAAER,MAAWQ,EAAER,GAAGwB,aAAa,kBAAkBhB,EAAER,GAAGyB,KAAK,UAAUtB,EAAEmB,KAAKd,EAAER,KAAK,IAAIA,EAAE,EAAEA,EAAEK,EAAEc,OAAOnB,IAAIK,EAAEL,KAAKnC,KAAK4B,KAAKY,EAAEL,GAAGwB,aAAa,kBAAkBnB,EAAEL,GAAGyB,KAAK,aAAa,IAAIzB,EAAE,EAAEA,EAAEnD,EAAEsE,OAAOnB,IAAInD,EAAEmD,KAAKnC,KAAK4B,KAAKS,EAAEW,KAAKhE,EAAEmD,GAAGY,SAASc,mBAAmBC,IAAI9D,KAAKQ,iBAAY,IAAShC,GAAG6D,EAAEiB,SAAS9E,KAAKA,EAAE6D,EAAEiB,SAAS3E,EAAEK,EAAEmD,MAAMnD,EAAEsE,QAAQtD,KAAKK,sBAAsBL,KAAKa,2BAA2Be,GAAG5B,KAAKK,qBAAqBL,KAAKK,qBAAqBuD,KAAK,mBAAmB5D,KAAKK,qBAAqB,KAAKkC,EAAEqB,KAAK,kBAAkB5D,KAAKa,6BAA6BlC,IAAIqB,KAAKK,uBAAuBL,KAAKK,uBAAuBL,KAAKa,2BAA2Be,GAAG5B,KAAKK,qBAAqBL,KAAKK,qBAAqBuD,KAAK,kBAAkB5D,KAAKa,6BAA6BlC,IAAIA,EAAEiF,KAAK,cAAc5D,KAAKK,qBAAqB1B,EAAEqB,KAAKc,sBAAsBc,GAAGjD,EAAE4D,EAAEqB,KAAK,aAAa5D,KAAKc,yBAAyBwB,EAAEgB,QAAQf,EAAEqB,KAAK,UAAUpB,EAAEc,QAAQf,EAAEqB,KAAK,WAAW5D,KAAKyB,uBAAuB+B,eAAe,WAAW,IAAIjF,EAAE,IAAI2B,MAAMK,KAAK,gBAAgBjC,GAAG,IAAIG,EAAED,EAAE,OAAOD,EAAEuE,cAAcxE,EAAEyE,UAAU/C,KAAK4C,KAAKjD,QAAQrB,EAAEyE,SAAStC,YAAYnC,EAAEyE,SAAStC,UAAU,IAAIP,MAAMQ,UAAUpC,EAAEyE,SAAS,IAAI7C,MAAM6D,MAAMC,KAAKC,SAASD,KAAKC,SAASD,KAAKC,WAAW3F,EAAEuD,QAAQkB,SAASM,IAAI/E,EAAEyE,SAAStC,YAAYnC,EAAEyE,SAAStC,UAAUqC,cAAcxE,EAAEyE,WAAWtE,EAAEF,EAAE0E,IAAIzE,EAAED,EAAE2E,IAAI5E,EAAEyE,SAASc,kBAAkBvF,EAAEyE,SAASc,mBAAmB,IAAI3D,MAAMC,QAAQ5B,EAAE4E,UAAU7E,EAAEyE,SAASc,mBAAmB7D,KAAKY,OAAO+B,GAAGnE,EAAEmE,GAAG3C,KAAKW,OAAOgC,GAAGlE,EAAEkE,GAAG3C,KAAKY,OAAOsD,GAAG1F,EAAE0F,GAAGlE,KAAKW,OAAOuD,GAAGzF,EAAEyF,GAAGlE,KAAKY,OAAOuD,GAAG3F,EAAE2F,GAAGnE,KAAKW,OAAOwD,GAAG1F,EAAE0F,GAAjlB,GAAulB/C,SAAS,WAAWpB,KAAKwB,OAAM,GAAIqB,eAAe,WAAW,IAAItE,EAAEyB,KAAK4C,KAAK5C,KAAKgB,UAAUzC,EAAEuB,QAAQE,KAAK4B,GAAGC,QAAQuC,iBAAiB7F,EAAEuB,SAASE,KAAK4B,GAAGC,QAAQwC,SAASrE,KAAKwB,OAAM,QDAnuIlD,EAAuK,SAASC,GAAG,SAASD,EAAEC,EAAED,GAAGC,EAAE+F,UAAUC,OAAOC,OAAOlG,EAAEgG,WAAW/F,EAAE+F,UAAUG,YAAYlG,EAAEI,EAAEJ,EAAED,YAAYK,EAAEJ,EAAED,GAAG,OAAOK,EAAE4F,OAAOG,gBAAgB,SAASnG,EAAED,GAAG,OAAOC,EAAEoG,UAAUrG,EAAEC,IAAIA,EAAED,OAAOE,EAAE,SAASD,GAAG,SAASI,EAAEL,GAAG,IAAIK,EAAE,OAAOA,EAAEJ,EAAEO,KAAKkB,OAAOA,MAAM4E,QAAQtG,GAAGuG,SAASC,cAAc,OAAOnG,EAAEiG,QAAQG,MAAMC,SAAS,WAAWrG,EAAEiG,QAAQG,MAAME,cAAc,OAAOtG,EAAEmD,iBAAiB,UAAU,WAAW9B,KAAKkF,SAAS,SAAS3G,GAAGA,EAAEqG,mBAAmBO,SAAS,OAAO5G,EAAEqG,QAAQQ,YAAY7G,EAAEqG,QAAQQ,WAAWC,YAAY9G,EAAEqG,aAAajG,SAASL,EAAEK,EAAEJ,GAAGI,EAAE2F,UAAUtB,KAAK,SAAS1E,EAAEK,GAAG,OAAOJ,EAAE+F,UAAUtB,KAAKlE,KAAKkB,KAAK1B,EAAEK,GAAGqB,KAAK4E,QAAQtG,EAAEsG,QAAQU,WAAU,GAAItF,MAAMrB,EAA7d,CAAgeuB,MAAMqF,UAAU/G,EAAE8F,UAAUkB,eAAc,EAAG,SAASjH,GAAG,SAASI,EAAEL,GAAG,IAAIK,EAAE,OAAOA,EAAEJ,EAAEO,KAAKkB,KAAK1B,IAAI0B,MAAMyF,WAAW,EAAE9G,SAASL,EAAEK,EAAEJ,GAAGI,EAAE2F,UAAUtB,KAAK,SAAS1E,EAAEK,GAAG,OAAOJ,EAAE+F,UAAUtB,KAAKlE,KAAKkB,KAAK1B,EAAEK,GAAGqB,KAAKyF,WAAWnH,EAAEmH,WAAWzF,MAAMrB,EAArM,CAAwMH,GAAG8F,UAAUoB,eAAc,EAAG,IAAIjH,EAAE,IAAIyB,MAAMyF,QAAQvD,EAAE,IAAIlC,MAAMyF,QAAQpD,EAAE,WAAW,IAAIhE,EAAED,EAAEK,EAAEH,EAAE+D,EAAEvC,KAAKmC,EAAE,CAACyD,OAAO,CAACC,IAAI,EAAEd,MAAM,IAAIjF,QAAQ,IAAIgG,SAAS9G,EAAE6F,SAASC,cAAc,OAAO9F,EAAE+F,MAAMgB,SAAS,SAAS/F,KAAKgG,WAAWhH,EAAE,IAAIqD,EAAEwC,SAASC,cAAc,OAAO,SAASrC,EAAElE,GAAG,OAAOyF,KAAKiC,IAAI1H,GAAG,MAAM,EAAEA,WAAWQ,EAAER,GAAG,IAAID,EAAEC,EAAE2H,SAAS,MAAM,YAAYzD,EAAEnE,EAAE,IAAI,IAAImE,GAAGnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,GAAGnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,GAAGnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,GAAGnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,aAAagE,EAAE/D,GAAG,IAAID,EAAEC,EAAE2H,SAAS,MAAM,gCAAgCzD,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,GAAGnE,EAAE,IAAI,IAAImE,GAAGnE,EAAE,IAAI,IAAImE,GAAGnE,EAAE,IAAI,IAAImE,GAAGnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,IAAI,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,IAAImE,EAAEnE,EAAE,KAAK,aAAa6H,EAAE5H,EAAED,EAAEK,EAAEH,GAAG,GAAGD,EAAEiH,cAAc,CAAC,IAAIxG,EAAET,EAAE6H,eAAe7D,EAAEjE,EAAEK,GAAGJ,EAAEmH,eAAejH,EAAEuE,KAAKrE,EAAE0H,oBAAoB5H,EAAE6H,YAAY,IAAI/H,EAAEkH,YAAYhH,EAAE8H,SAASnE,EAAEoE,cAAcjI,EAAEkH,aAAahH,EAAEgI,aAAalI,EAAEmI,aAAajI,EAAEkI,MAAMpI,EAAEoI,OAAOlI,EAAEyH,SAAS,GAAG,EAAEzH,EAAEyH,SAAS,GAAG,EAAEzH,EAAEyH,SAAS,IAAI,EAAEzH,EAAEyH,SAAS,IAAI,EAAElH,EAAEsD,EAAE7D,IAAIO,EAAEsD,EAAE/D,EAAEmI,aAAa,IAAIjE,EAAElE,EAAEqG,QAAQ7F,EAAEoD,EAAErC,QAAQ8G,IAAIrI,QAAG,IAASQ,GAAGA,EAAEgG,QAAQ/F,IAAIyD,EAAEsC,MAAM8B,UAAU7H,EAAEmD,EAAErC,QAAQgH,IAAIvI,EAAE,CAACwG,MAAM/F,KAAKyD,EAAEsC,MAAMgC,QAAQxI,EAAEyI,QAAQ,GAAG,OAAOvE,EAAE2C,aAAa/C,GAAGA,EAAE4E,YAAYxE,GAAGlE,EAAE2I,cAAc3E,EAAEjE,EAAEK,OAAO,IAAIM,EAAE,EAAEkI,EAAE5I,EAAE8F,SAASf,OAAOrE,EAAEkI,EAAElI,IAAIkH,EAAE5H,EAAE8F,SAASpF,GAAGX,EAAEK,GAAG0D,EAAE0C,MAAMqC,eAAe,cAAc/E,EAAE0C,MAAME,cAAc,OAAOjG,EAAEiI,YAAY5E,GAAGrC,KAAKqH,QAAQ,WAAW,MAAM,CAACC,MAAM/I,EAAEgJ,OAAOjJ,IAAI0B,KAAKwH,OAAO,SAASjJ,EAAED,GAAG,IAAIG,EAAE2D,EAAEG,EAAEjE,EAAEmJ,iBAAiBvB,SAAS,GAAG1H,EAAE2D,EAAEyD,OAAOC,MAAMtD,IAAIvD,EAAE+F,MAAM2C,YAAYpJ,EAAEqJ,oBAAoBpF,EAAE,KAAK,GAAGJ,EAAEyD,OAAOC,IAAItD,IAAG,IAAKhE,EAAEqJ,YAAYrJ,EAAEsJ,oBAAoB,OAAOvJ,EAAE8E,QAAQ9E,EAAEuJ,oBAAoBvJ,EAAEwJ,uBAAuBrJ,IAAIH,EAAEyJ,MAAMzJ,EAAE0J,MAAM,EAAE5F,GAAG9D,EAAE2J,IAAI3J,EAAE4J,QAAQ,GAAG,IAAI5F,GAAGhE,EAAEwJ,qBAAqB,SAASvF,EAAE,cAAcE,EAAEhE,GAAG,MAAMgE,EAAEL,GAAG,MAAMrD,EAAET,EAAE+H,oBAAoB,cAAc9D,EAAE,MAAMxD,EAAET,EAAE+H,qBAAqB,aAAa1H,EAAE,MAAMH,EAAE,MAAM2D,EAAEyD,OAAOb,QAAQzC,IAAID,EAAE0C,MAAM8B,UAAUvE,EAAEH,EAAEyD,OAAOb,MAAMzC,GAAG6D,EAAE5H,EAAEA,EAAED,IAAI0B,KAAKmI,QAAQ,SAAS1J,EAAE2D,GAAGzD,GAAGJ,EAAEE,GAAG,EAAED,GAAGF,EAAE8D,GAAG,EAAEpD,EAAE+F,MAAMuC,MAAM7I,EAAE,KAAKO,EAAE+F,MAAMwC,OAAOnF,EAAE,KAAKC,EAAE0C,MAAMuC,MAAM7I,EAAE,KAAK4D,EAAE0C,MAAMwC,OAAOnF,EAAE,OAAOD,EAAE,IAAInD,EAAE,WAAW,SAAST,EAAEA,EAAED,GAAG0B,KAAKoI,iBAAiB9J,EAAE0B,KAAKJ,SAAQ,EAAGI,KAAKqI,YAAY,IAAI9F,EAAEvC,KAAKgG,WAAWhG,KAAKqI,YAAYrC,WAAWhG,KAAKgG,WAAWjB,MAAMC,SAAS,QAAQhF,KAAKgG,WAAWjB,MAAMuD,OAAO,KAAKtI,KAAKuI,UAAU,IAAIrI,MAAMsI,kBAAkBjK,EAAEsH,IAAItH,EAAEkK,OAAOlK,EAAEmK,KAAKvG,EAAE5D,EAAEoK,IAAIxG,GAAGnC,KAAK4F,OAAOrH,EAAEyB,KAAK4I,SAAS,IAAI1I,MAAM2I,MAAM7I,KAAK8I,OAAO9I,KAAK8I,OAAOzH,KAAKrB,UAAU1B,EAAEC,EAAE+F,UAAU,OAAOhG,EAAE6J,QAAQ,SAAS5J,EAAED,GAAG0B,KAAKqI,YAAYF,QAAQ5J,EAAED,GAAG0B,KAAKuI,UAAUE,OAAOlK,EAAED,EAAE0B,KAAKuI,UAAUQ,0BAA0BzK,EAAEwK,OAAO,WAAW9I,KAAK4F,OAAOoD,iBAAiBhJ,KAAKuI,UAAUvD,UAAUhF,KAAKuI,UAAUvD,SAASiE,eAAe9G,GAAGnC,KAAK4F,OAAOsD,mBAAmBlJ,KAAKuI,UAAUY,YAAYnJ,KAAKqI,YAAYb,OAAOxH,KAAK4I,SAAS5I,KAAKuI,YAAYhK,EAAjuB,GAAsuB8D,EAAE,SAAS9D,GAAG,SAASI,EAAEL,EAAEK,EAAEF,EAAE2D,EAAEG,GAAG,IAAIvD,EAAEqD,QAAG,IAASE,EAAE,GAAGA,GAAG6G,aAAa3G,OAAE,IAASJ,EAAE,KAAKA,EAAEtD,EAAE,IAAImB,MAAMmJ,cAAc5K,EAAE2D,GAAGE,EAAE,IAAIpC,MAAMoJ,kBAAkB,CAACC,QAAQ,EAAEC,SAAStJ,MAAMuJ,WAAWC,KAAKxJ,MAAMyJ,WAAWC,MAAM,IAAI1J,MAAM6D,MAAM,EAAE,EAAE,KAAK,OAAO/E,EAAET,EAAEO,KAAKkB,KAAKjB,EAAEuD,IAAItC,MAAM6J,QAAQvL,EAAEU,EAAEgH,WAAWrH,EAAEK,EAAE8K,YAAY1H,EAAE3D,EAAEO,EAAEoK,aAAa3G,EAAEzD,EAAE+K,cAAc/K,EAAEoK,aAAapK,EAAE8K,YAAY9K,EAAEsI,MAAM7I,EAAEO,EAAEuI,OAAOnF,EAAEpD,EAAEgL,gBAAgBhL,EAAEiL,UAAU,IAAIzL,EAAEQ,EAAEgH,YAAYhH,EAAEiL,UAAUtD,MAAMsC,eAAe9G,GAAGnD,EAAEoK,aAAapK,EAAEsI,QAAQtI,EAAEkL,sBAAsBlL,EAAEiL,UAAUtD,MAAM3H,EAAEmL,KAAK,IAAIjK,MAAMC,QAAQnB,EAAEoL,IAAI,IAAIlK,MAAMK,KAAKvB,EAAE8C,iBAAiB,QAAQ9C,EAAEqL,aAAarL,EAAE8C,iBAAiB,UAAU9C,EAAEsL,eAAetL,EAAE8J,OAAO9J,EAAE8J,OAAOzH,KAAK,SAAS9C,GAAG,QAAG,IAASA,EAAE,UAAUgM,eAAe,6DAA6D,OAAOhM,EAAvH,CAA0HS,IAAIA,EAAEV,EAAEK,EAAEJ,GAAG,IAAIE,EAAEE,EAAE2F,UAAU,OAAO7F,EAAE4L,YAAY,WAAWrK,KAAK6J,QAAQjB,SAASvF,IAAIrD,KAAKiK,YAAYxL,EAAE6L,cAAc,WAAWtK,KAAK6J,QAAQjB,SAAS7G,OAAO/B,KAAKiK,YAAYxL,EAAEuL,cAAc,WAAWhK,KAAKgG,WAAWjB,MAAMuC,MAAMtH,KAAKoJ,aAAa,KAAKpJ,KAAKgG,WAAWjB,MAAMwC,OAAOvH,KAAK+J,cAAc,MAAMtL,EAAE+L,WAAW,SAASjM,GAAGyB,KAAKgG,WAAWZ,YAAYpF,KAAKgG,WAAWZ,WAAWC,YAAYrF,KAAKgG,YAAYhG,KAAKgG,WAAWzH,EAAEyB,KAAKiK,UAAUrF,QAAQrG,EAAEyB,KAAKgK,iBAAiBvL,EAAEqK,OAAO,SAASvK,GAAGyB,KAAKiK,UAAUd,WAAWnG,KAAKzE,EAAE4K,YAAYnJ,KAAKiK,UAAUjF,SAAShC,KAAKzE,EAAEyG,UAAUiE,eAAe9G,GAAGnC,KAAKoK,IAAItH,cAAc9C,MAAMqH,QAAQrH,KAAKmK,MAAM,IAAI7L,EAAEC,EAAEoI,MAAM3G,KAAKyK,gBAAgBnM,IAAI0B,KAAKyK,eAAenM,EAAE0B,KAAKiK,UAAUtD,MAAMG,IAAI9G,KAAKkK,sBAAsBvH,EAAE3C,KAAKkK,sBAAsBhG,EAAElE,KAAKkK,sBAAsB/F,GAAGnE,KAAKiK,UAAUtD,MAAMJ,SAASjI,IAAI0B,KAAKiK,UAAUjD,QAAQzI,EAAEyI,SAASvI,EAAEiM,QAAQ,WAAW1K,KAAKiC,oBAAoB,QAAQjC,KAAKqK,aAAarK,KAAKiC,oBAAoB,UAAUjC,KAAKsK,eAAetK,KAAKgG,WAAWjE,SAAS/B,KAAK2K,SAASD,UAAU1K,KAAK4K,SAASF,WAAW/L,EAAh5D,CAAm5DuB,MAAM2K,MAAMpI,EAAEvD,OAAOK,kBAAkB,aAAa,CAACC,OAAO,CAACsL,IAAI,CAACpL,QAAQ,qBAAqB4H,MAAM,CAAC5H,QAAQ,GAAG6H,OAAO,CAAC7H,QAAQ,KAAKqL,eAAe,CAACrL,SAAQ,GAAIsL,WAAW,CAACtL,QAAQ,GAAGuL,iBAAiB,CAACvL,SAAQ,IAAKK,KAAK,WAAW,IAAIxB,EAAEyB,KAAK4B,GAAGtD,EAAE0B,KAAK4C,KAAK,GAAGtE,EAAE2M,mBAAmB1M,EAAEsD,QAAQkD,MAAMC,SAAS,WAAWzG,EAAEsD,QAAQkD,MAAMuD,OAAO,KAAK,GAAGhK,EAAEyM,iBAAiBzM,EAAE4M,oBAAmB,EAAG3M,EAAE4M,aAAa,WAAW,0BAA0B7M,EAAEgJ,MAAM,YAAYhJ,EAAEiJ,OAAO,KAAKhJ,EAAEuD,iBAAiB,QAAQ,WAAW,GAAGxD,EAAE4M,qBAAqBrG,SAASuG,kBAAkB7M,EAAEsD,QAAQkD,MAAMuD,OAAO,KAAKhK,EAAE4M,oBAAmB,KAAM3M,EAAEuD,iBAAiB,aAAa,WAAWxD,EAAEuL,QAAQ7D,WAAWjB,MAAMuD,OAAO,MAAM/J,EAAEuD,iBAAiB,aAAa,WAAWxD,EAAEuL,QAAQ7D,WAAWjB,MAAMuD,OAAO,KAAKhK,EAAE4M,oBAAmB,KAAM3M,EAAEuD,iBAAiB,aAAa,WAAW,IAAInD,EAAEkG,SAASC,cAAc,UAAUnG,EAAEwM,aAAa,MAAM7M,EAAEwM,KAAKnM,EAAEoG,MAAMsG,OAAO,OAAO,IAAI7M,EAAE,IAAIQ,EAAET,EAAEsD,QAAQ+D,OAAOrH,GAAGC,EAAE2J,QAAQmD,OAAOC,WAAWD,OAAOE,aAAa3G,SAAS4G,KAAKxE,YAAYzI,EAAEwH,YAAY,IAAIvH,EAAE,IAAI4D,EAAE7D,EAAEG,EAAEL,EAAEgJ,MAAMhJ,EAAEiJ,QAAQ,GAAGhJ,EAAEwE,SAASM,IAAI5E,GAAG,GAAGH,EAAEyM,eAAe,CAAC,IAAI3I,EAAEyC,SAASC,cAAc,OAAO1C,EAAE2C,MAAMC,SAAS,QAAQ5C,EAAE2C,MAAMkD,IAAI,IAAI7F,EAAE2C,MAAMuC,MAAM,OAAOlF,EAAE2C,MAAMwC,OAAO,OAAOnF,EAAE2C,MAAMuD,OAAO,KAAK9J,EAAEwH,WAAWiB,YAAY7E,GAAGA,EAAEN,iBAAiB,QAAQ,WAAWvD,EAAEsD,QAAQkD,MAAMuD,OAAO,SAASoD,kBAAkB/M,EAAEqB,KAAK2L,cAAcnN,EAAEF,EAAEuL,QAAQrL,EAAEF,EAAEsG,QAAQnG,EAAE6M,OAAOxJ,iBAAiB,SAAS,WAAWtD,EAAE2J,QAAQmD,OAAOC,WAAWD,OAAOE,iBAAiBlN,EAAEsN,OAAO,EAAEtN,EAAEuN,aAAY,GAAI3J,KAAK,WAAW,IAAI3D,EAAEyB,KAAK4B,GAAGtD,EAAE0B,KAAK4C,KAAK,GAAG,GAAGtE,EAAEwN,SAAS,GAAG,GAAGxN,EAAEuN,YAAY,CAAC,IAAIlN,EAAEL,EAAEuL,QAAQrL,EAAEF,EAAEsG,QAAQtG,EAAEsN,OAAOtN,EAAE0M,YAAY,IAAIrM,GAAGA,EAAEmK,SAAStK,GAAGA,EAAEsK,OAAOvK,EAAEwE,WAAWzE,EAAEsN,cAAcrN,EAAEsD,QAAQ+D,SAAS5F,KAAK4B,GAAGgC,KAAK,cAActF,EAAEuN,aAAY,IAAKE,MAAM,WAAW/L,KAAK4C,KAAKkJ,UAAS,GAAIpK,KAAK,WAAW1B,KAAK4C,KAAKkJ,UAAS,KAAMvN,EAAEyN,UAAUvJ,GAAtwP,iBAAiB/D,SAAS,oBAAoBuN,OAAO3N,EAAEI,SAAS,mBAAmBwN,QAAQA,OAAOC,IAAID,OAAO,CAAC,WAAW5N,GAAGA,EAAM8N,KAAMC,kBAAkB,IEGzKnN,OAAOK,kBAAkB,aAAc,CACrCC,OAAQ,CACNsL,IAAK,CAAEpL,QAAS,qBAChB4M,KAAM,CAAE5M,QAAS,IACjB4H,MAAO,CAAE5H,QAAS,KAClB6H,OAAQ,CAAE7H,QAAS,KACnB6M,WAAY,CAAE7M,QAAS,KACvB8M,YAAa,CAAE9M,SAAS,GACxB+M,iBAAkB,CAAE/M,SAAS,GAC7BgN,mBAAoB,CAAEhN,SAAS,IAGjCK,KAAM,WACJ,MAAM6B,EAAK5B,KAAK4B,GACVgB,EAAO5C,KAAK4C,KACZ+J,EAAQ3M,KAAK4B,GAAGC,QAItB,IAAI+K,EA4BJ,GA9BAhL,EAAGmB,SAASiC,SAASd,GAAKtB,EAAK2E,OAAS,EAIX,GAAzB3E,EAAK6J,iBACP7K,EAAGuJ,aAAa,aAAc,CAC5BL,IAAKlI,EAAKkI,IACVxD,MAAO1E,EAAK0E,MACZC,OAAQ3E,EAAK2E,OACbwD,gBAAgB,KAGlBnJ,EAAGuJ,aAAa,WAAY,CAAE0B,UAAW,QAASvF,MAAO1E,EAAK0E,MAAOC,OAAQ3E,EAAK2E,SAClF3F,EAAGuJ,aAAa,WAAY,CAAEvB,MAAO,UAErCgD,EAAS/H,SAASC,cAAc,WACzBgI,IAAMlK,EAAKkI,IAClBjG,SAAS4G,KAAKxE,YAAY2F,GAE1BA,EAAO7H,MAAMC,SAAW,QACxB4H,EAAO7H,MAAMkD,IAAM,IACnB2E,EAAO7H,MAAMiD,KAAO,IACpB4E,EAAO7H,MAAMuC,MAAQ,OACrBsF,EAAO7H,MAAMwC,OAAS,OACtBqF,EAAO7H,MAAMgB,SAAW,OAExB6G,EAAO7H,MAAMuD,OAAS,GACtBsE,EAAO7H,MAAMgC,QAAU,QAGM,GAA3BnE,EAAK8J,mBAA4B,CACnC,MAAMK,EAASlI,SAASC,cAAc,UACtCiI,EAAOC,UAAY,SAEnB,MAAMC,EAAO,0kBA2BPlI,EAAQF,SAASC,cAAc,SACjCC,EAAMmI,WACRnI,EAAMmI,WAAWC,QAAUF,EAE3BlI,EAAMkC,YAAYpC,SAASuI,eAAeH,IAE5CF,EAAO9F,YAAYlC,GACnBF,SAAS4G,KAAKxE,YAAY8F,GAE1BA,EAAOhI,MAAMgC,QAAU,OAEvBgG,EAAOM,QAAU,KACf,GAA6B,GAAzBzK,EAAK6J,iBAA0B,CACjC,MAAM5C,EAAUjI,EAAG+J,cAAc3F,WAEjC4G,EAAO7H,MAAQnC,EAAK0K,aACpBzD,EAAQ9E,MAAQnC,EAAK2K,cACrB1D,EAAQxF,SAAS,GAAGU,MAAMoI,QAAUvK,EAAK4K,mBAEzC5L,EAAG6L,WAAH,WAA4B/L,OAG9B,MAAMkE,EAAS+G,EAAM/G,OAAOhE,GAEtB8L,EAAY,IAAIxN,MAAMC,QAC5ByB,EAAGmB,SAASiG,iBAAiB0E,GAC7BA,EAAUxJ,EAAI0B,EAAO7C,SAASiC,SAASd,EAEvC,MAAMyJ,EAAY,IAAIzN,MAAMC,QAC5ByB,EAAGmB,SAAS6K,kBAAkBD,GAAW1E,eAAe,KAExD,MAAM4E,EAAc,IAAI3N,MAAMC,QAO9B,GANA0N,EAAY7K,KAAK0K,GACjBG,EAAYxK,IAAIsK,GAEhB/H,EAAO7C,SAASiC,SAASrC,EAAIkL,EAAYlL,EACzCiD,EAAO7C,SAASiC,SAASb,EAAI0J,EAAY1J,EAErCyB,EAAO6H,WAAW,iBAAkB,CACtC7H,EAAOuF,aAAa,gBAAiB,CAAEvL,SAAS,IAEhD,MAAMkO,EAAS,IAAI5N,MAAMC,QACzByF,EAAO7C,SAASiG,iBAAiB8E,GAEjC,MAAMC,EAAa,IAAI7N,MAAMC,QAC7B4N,EAAWC,WAAWF,EAAQJ,GAAWrK,IAAIyK,GAE7ClI,EAAO7C,SAASkL,OAAOF,GACvBnI,EAAO7C,SAASmL,eAEhB,MAAMC,EAAWvI,EAAOrC,aAAa,YACrCqC,EAAO6H,WAAW,iBAAiBW,YAAYD,SAASxL,EAAIzC,MAAM8D,KAAKqK,SAASF,EAASxL,GACzFiD,EAAO6H,WAAW,iBAAiBa,UAAUH,SAASjK,EAAIhE,MAAM8D,KAAKqK,SAASF,EAASjK,GAEvF0B,EAAOuF,aAAa,gBAAiB,CAAEvL,SAAS,IAGlD+M,EAAM5H,MAAMgC,QAAU,QACtBgG,EAAOhI,MAAMgC,QAAU,QAGzBnE,EAAK2L,aAAexB,EAGtBnL,EAAGC,QAAQC,iBAAiB,SAAU,KACpC,MAAM0M,EAAW7B,EAAM/G,OAAOhE,GAC1B4M,EAAS5P,KAGX4P,EAAS5P,GAAK,sBAFdgD,EAAGuJ,aAAa,gBAAiB,CAAErL,QAAU,IAAG0O,EAAS5P,SAO7D,MAAM6P,EAAQ5J,SAASC,cAAc,UAQrC,GAPA2J,EAAMtD,aAAa,QAASvI,EAAK0J,MACjCmC,EAAMtD,aAAa,WAAa,KAAkB,GAAdvI,EAAK2E,OAAe,IAAO3E,EAAK2J,gBACpEkC,EAAMtD,aAAa,QAAS,UAC5BsD,EAAMtD,aAAa,OAAQ,UAC3BvJ,EAAGqF,YAAYwH,GACf7L,EAAK8L,QAAUD,EAES,GAApB7L,EAAK4J,YAAqB,CAC5B,MAAMD,EAAa3J,EAAK2J,WAClBjF,EAAQ1E,EAAK0E,MACbC,EAAS3E,EAAK2E,OAEdoH,EAAO9J,SAASC,cAAc,SACpC6J,EAAKxD,aAAa,YAAgB7D,EAAQiF,GAAc,EAAzB,QAC/BoC,EAAKxD,aAAa,QAAU,GAAEoB,KAAchF,KAAUgF,KACtD3K,EAAGqF,YAAY0H,GAEf,MAAMC,EAAO/J,SAASC,cAAc,SACpC8J,EAAKzD,aAAa,aAAiB7D,EAAQiF,GAAc,EAA1B,QAC/BqC,EAAKzD,aAAa,QAAU,GAAEoB,KAAchF,KAAUgF,KACtD3K,EAAGqF,YAAY2H,GAEf,MAAMC,EAAOhK,SAASC,cAAc,SACpC+J,EAAK1D,aAAa,WAAa,MAAK5D,EAASgF,GAAc,OAC3DsC,EAAK1D,aAAa,QAAU,GAAE7D,EAAqB,EAAbiF,KAAkBA,KAAcA,KACtE3K,EAAGqF,YAAY4H,GAEf,MAAMC,EAAOjK,SAASC,cAAc,SACpCgK,EAAK3D,aAAa,WAAa,SAAOoB,EAAa,EAAI,MACvDuC,EAAK3D,aAAa,QAAU,GAAE7D,EAAqB,EAAbiF,KAAkBhF,EAAsB,EAAbgF,KAAkBA,EAAa,KAChG3K,EAAGqF,YAAY6H,GAGjBlN,EAAGE,iBAAiB,WAAY,WAC9B,GAA6B,GAAzBc,EAAK6J,iBAA0B,CACjC7K,EAAG6L,WAAH,WAA4B1B,QAG5B,MAAMlC,EAAUjI,EAAG+J,cAAc3F,WAEjCpD,EAAK0K,cAHLV,EAAShL,EAAG8J,mBAGe3G,MAAMoI,QACjCvK,EAAK2K,cAAgB1D,EAAQ9E,MAAMoI,QACnCvK,EAAK4K,mBAAqB3D,EAAQxF,SAAS,GAAGU,MAAMoI,QAEpDP,EAAO7H,MAAQ,GACf8E,EAAQ9E,MAAQ,GAChB8E,EAAQxF,SAAS,GAAGU,MAAQ,GAE5B6H,EAAO7H,MAAMC,SAAW,QACxB4H,EAAO7H,MAAMkD,IAAM,IACnB2E,EAAO7H,MAAMiD,KAAO,IACpB4E,EAAO7H,MAAMuC,MAAQ,OACrBsF,EAAO7H,MAAMwC,OAAS,OACtBqF,EAAO7H,MAAMgB,SAAW,OAG1B4G,EAAM5H,MAAMgC,QAAU,OACtB6F,EAAO7H,MAAMgC,QAAU,QACnBnE,EAAK2L,eAAc3L,EAAK2L,aAAaxJ,MAAMgC,QAAU,SAEzDlC,SAASuG,qBAIbtC,OAAQ,WACN,MAAMlG,EAAO5C,KAAK4C,KAElBA,EAAK8L,QAAQvD,aAAa,QAASvI,EAAK0J"}